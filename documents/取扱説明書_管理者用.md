# 商品画像アップローダー 取扱説明書（管理者用）

このマニュアルは、商品画像アップローダーの管理者向け操作方法を説明するものです。

**【重要】モバイル表示の改善について**
本アプリケーションは、スマートフォン（iPhone SEなどの小型デバイスを含む）での操作性向上のため、レスポンシブデザインに対応しています。画面幅に応じて文字サイズやレイアウトが自動調整され、どのデバイスからでも快適にご利用いただけます。

**【重要】ボタン表示の統一について**
各画面のナビゲーションボタンは、操作の一貫性のため「← 戻る」という表記に統一され、ページの右上隅に配置されています。

---

## 1. ログインとダッシュボード

1.  指定されたURLにアクセスし、メールアドレスとパスワードを入力してログインします。
2.  ログインに成功すると、操作メニューが一覧表示される「管理者ダッシュボード」に移動します。

ダッシュボードでは、撮影者のアカウント管理や撮影準備、登録済み画像の確認など、すべての管理機能にアクセスできます。

<<ここに画像を挿入。管理画面のダッシュボード全体のスクリーンショット>>

---

## 2. 撮影の準備と実行

撮影者に撮影を依頼、または運営者自身が撮影を行う場合、まずどの商品のまとまりを撮影するのかを示す「グループID」を決め、撮影用のURLとQRコードを発行する必要があります。

1.  ダッシュボードから「**撮影用URL/QRコード作成**」画面に移動します。
2.  「グループID」の入力欄に、任意のID（例: `D_0012`, `12345` など）を入力します。リサイクルショップの買取番号などを想定しています。
3.  「**URL/QRコード作成**」ボタンを押すと、入力したグループIDを含むURLと、そのURLが埋め込まれたQRコードが画面に表示されます。

### 撮影者に撮影を依頼する場合

- 表示されたQRコードを、撮影担当者のスマートフォンで読み取ってもらってください。
- または、表示されたURLをコピーして、チャットなどで撮影担当者に送付することもできます。

### 運営者自身が撮影する場合

- 「**今すぐ写真撮影**」ボタンを押すと、運営者アカウントでログインしたまま、直接撮影ページに移動できます。
- 撮影ページの操作方法は、撮影者用マニュアルに準じます。撮影完了後は、ヘッダーに表示される「**ダッシュボードに戻る**」ボタンで管理画面に戻ることができます。

<<ここに画像を挿入。group_idを入力してQRコードとURLが生成されている画面>>

---

## 3. グループごとの進捗確認（統計情報）

ダッシュボードから「グループID毎の統計情報」ボタンをクリックすると、各グループIDの進捗状況を確認できるページに移動します。

<<ここに画像を挿入。統計情報ページ全体のスクリーンショット>>

この画面では、グループIDごとに以下の情報が表示されます。

*   **アップロード済**: 外部システムへの連携が完了した件数
*   **未アップロード**: まだ連携されていない件数
*   **合計**: 登録されている合計件数
*   **アップロード率**: アップロード済みの件数の割合

### 便利な機能

*   **アップロード率100%のグループを非表示にする**: このチェックボックスをオンにすると、作業が完了した（アップロード率が100%の）グループが一覧から非表示になり、まだ作業が残っているグループに集中できます。
*   **画像一覧へ移動**: 各グループの行にあるこのボタンをクリックすると、「登録画像一覧」画面に移動し、自動的にそのグループIDで検索が実行されます。
*   **このグループの画像を一括削除**: 各グループの行の右端にあるこのボタンをクリックすると、そのグループIDに紐づくすべての商品情報と画像ファイルを一括で削除します。**この操作は元に戻せないため、実行前に確認ダイアログが表示されます。削除は慎重に行ってください。**

---

## 4. 登録済み商品の管理

撮影者が登録した商品は、データベースに保存されます。この画面では、買取先ごと（グループIDごと）に、商品をフォルダ形式で直感的に管理・確認できます。

### ステップ1: グループ（フォルダ）を選択する

1.  ダッシュボードから「MongoDB 登録画像一覧」画面に移動します。
2.  画面には、各グループIDがフォルダとして一覧表示されます。各フォルダには、そのグループに含まれるアイテム数が表示されており、新しいアイテムが登録されたグループが一番上に表示されます。
3.  目的のグループIDが見つからない場合は、画面上部の検索バーにIDを入力して絞り込むことができます。
4.  確認したいグループのフォルダをクリックします。

<<ここに画像を挿入。グループIDがフォルダとして並んでいる画面>>

### ステップ2: 商品一覧を確認する

1.  フォルダをクリックすると、そのグループIDに所属する商品が一覧で表示されます。
2.  この画面では、各商品の登録日や画像枚数などを確認できます。
3.  一つ上の階層に戻りたい場合は、画面上部の「← フォルダ一覧に戻る」ボタンをクリックしてください。

<<ここに画像を挿入。特定のグループIDに所属する商品が一覧表示されている画面>>

### ステップ3: 詳細を確認・削除する

1.  商品一覧から、詳細を確認したい商品のカードをクリックします。
2.  商品の詳細画面に移動し、登録されているすべての画像や、品質・コメントなどの情報を確認できます。
3.  この画面で「**削除**」ボタンを押すと、その商品はデータベースから**完全に削除されます**。この操作は元に戻せないため、十分にご注意ください。

<<ここに画像を挿入。商品の詳細情報（複数画像など）が表示されている詳細画面>>

---

## 5. 仮登録データの一括削除（強制初期化）

撮影者が撮影の途中で画面を閉じてしまうなど、何らかの理由でサーバー上に不要な一時ファイルが残ってしまうことがあります。この「強制初期化」機能は、それらのゴミファイルを一括で掃除するためのものです。

1.  ダッシュボードから「仮登録リストの初期化」画面に移動します。
2.  「**初期化実行**」ボタンを押します。
3.  サーバーに一時保存されていたすべてのファイル（`temporary: true` のフラグを持つファイル）が削除され、撮影者の仮登録リストもクリアされます。

**【重要】**
この操作を実行すると、撮影中のユーザーがいた場合、そのセッションは強制的にリセットされます。撮影中のユーザーがいる可能性がある場合は、事前に声をかけてから実行してください。

<<ここに画像を挿入。「強制初期化」ボタンがある画面>>

---

## 6. ログアウト

各画面のページタイトルの下に表示されている「ログアウト」ボタンをクリックすることで、安全にシステムからログアウトできます。
作業終了後は、必ずログアウトしてください。

---

## 7. よくある質問

**Q. 撮影担当者から「撮影していた画像が急に消えた」と報告がありました。**
A. あなたが「強制初期化」を実行した可能性があります。この機能は、すべての撮影セッションに影響するため、実行するタイミングにご注意ください。

**Q. 間違えて商品を削除してしまいました。元に戻せますか？**
A. いいえ、一度削除した商品は復元できません。削除操作は慎重にお願いします。

**Q. 検索しても商品が見つかりません。**
A. 入力したグループIDや日付が正しいか、再度確認してください。また、撮影者がまだ「撮影終了」ボタンを押していない場合、商品は本登録されていないため検索には表示されません。
