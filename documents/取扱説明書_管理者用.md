# 商品画像アップローダー 取扱説明書（管理者用）

このマニュアルは、商品画像アップローダーの管理者向け操作方法を説明するものです。

本アプリケーションにおける管理者には「**運営者 (Operator)**」と「**システム管理者 (System Administrator)**」の2つの役割が存在します。ご自身の役割に応じたセクションをご参照ください。

---

## Part 1: 運営者 (Operator) のための取扱説明書

日々の運用を担当する管理者（店舗の店長など）向けのガイドです。

### 1.1 運営者の基本原則: データ分離

**【最重要】** 本システムは複数の運営者が利用することを前提に設計されています。あなたが管理するすべてのデータ（作成した撮影者アカウント、登録された画像グループ、統計情報など）は、**他の運営者からは完全に分離されており、閲覧・操作されることはありません。** 同様に、あなたも他の運営者のデータにアクセスすることはできません。

### 1.2 ログインとダッシュボード

1.  指定されたログインURLにアクセスし、あなたのメールアドレスとパスワードでログインします。
2.  ログインに成功すると、操作メニューが一覧表示される「管理者ダッシュボード」に移動します。

### 1.3 撮影者アカウントの管理

ダッシュボードの「撮影者アカウント管理」セクションから、あなたに紐づく撮影者のアカウントを管理できます。

*   **作成:** 新しい撮影者のメールアドレスとパスワードを入力して、アカウントを作成します。作成された撮影者は、自動的にあなたに紐づけられます。
*   **一覧:** あなたが作成した撮影者の一覧を確認できます。
*   **削除:** 不要になった撮影者アカウントを削除できます。

### 1.4 撮影の準備と実行

撮影者に撮影を依頼、またはあなた自身が撮影を行う場合、まずどの商品のまとまりを撮影するのかを示す「グループID」を決め、撮影用のURLとQRコードを発行する必要があります。

1.  ダッシュボードから「**撮影用URL/QRコード作成**」画面に移動します。
2.  「グループID」の入力欄に、任意のID（例: `D_0012`, `12345` など）を入力します。
3.  「**URL/QRコード作成**」ボタンを押すと、QRコードとURLが生成されます。このURLには、あなたを所有者として示す`operator_id`が自動的に含まれます。

*   **撮影者に依頼する場合:** 表示されたQRコードを撮影担当者のスマートフォンで読み取ってもらうか、URLをコピーして送付します。
*   **自身で撮影する場合:** 「**今すぐ写真撮影**」ボタンを押すと、直接撮影ページに移動できます。撮影完了後は、ヘッダーの「**← 戻る**」ボタンでダッシュボードに戻れます。

### 1.5 登録済み商品の管理

ダッシュボードの「MongoDB 登録画像一覧」から、**あなたに紐づく商品グループ**のみを管理・確認できます。

1.  **グループ選択:** フォルダ形式で表示される`group_id`の一覧から、目的のグループを選択します。
2.  **商品一覧:** 選択したグループに所属する商品が一覧表示されます。
3.  **詳細確認・削除:** 商品をクリックすると詳細画面に移動し、画像の確認や、商品単位での完全削除ができます。（削除したデータは復元できません）

### 1.6 グループごとの進捗確認（統計情報）

ダッシュボードの「グループID毎の統計情報」から、**あなたに紐づくグループ**の進捗状況のみを確認できます。グループの一括削除もこの画面から行えます。

---

## Part 2: システム管理者 (System Administrator) のための取扱説明書

システム全体を管理する最上位の管理者向けのガイドです。

### 2.1 システム管理者の役割

システム管理者の主な役割は以下の通りです。

*   **運営者 (Operator) アカウントの管理**
*   **孤立データの保守・管理**

### 2.2 ログインとダッシュボード

1.  指定されたログインURLにアクセスし、あなたのメールアドレスとパスワードでログインします。
2.  ログインに成功すると、「システム管理者ダッシュボード」に移動します。

### 2.3 運営者アカウントの管理

ダッシュボードの「運営者アカウント管理」セクションから、このシステムを利用する全運営者のアカウントを管理できます。

*   **作成:** 新しい運営者のメールアドレスとパスワードを入力して、アカウントを作成します。
*   **一覧:** 現在登録されているすべての運営者を確認できます。
*   **削除:** 不要になった運営者アカウントを削除できます。

**【注意】** 運営者を削除すると、その運営者に紐づいていた画像や撮影者アカウントは所有者不明の「孤立データ」となります。これらのデータは、次の「孤立データ管理」機能で整理する必要があります。

### 2.4 孤立データの管理

運営者が削除された場合など、所有者が不明になったデータを整理するための機能です。

<<ここに画像を挿入。孤立データ管理セクション全体のスクリーンショット>>

#### 孤立した撮影者アカウントの管理

1.  「**検索**」ボタンを押すと、所有者（`created_by_operator_id`）がいない撮影者アカウントの一覧が表示されます。
2.  各アカウントに対して、以下の操作が可能です。
    *   **割り当て:** ドロップダウンから現在存在する運営者を選択し、「**割当**」ボタンを押すと、その撮影者は選択された運営者に紐づき、正規の管理対象となります。
    *   **削除:** 不要なアカウントは「**削除**」ボタンで完全に削除できます。

#### 孤立した画像グループの管理

1.  「**検索**」ボタンを押すと、所有者（`operator_id`）がいない、または存在しない運営者に紐づく画像グループの一覧が表示されます。
2.  各グループに対して、以下の操作が可能です。
    *   **ダウンロード (ZIP):** 「**ダウンロード**」ボタンを押すと、そのグループに含まれる**すべての画像**がZIPファイルとしてダウンロードされます。ZIPファイル内は、元々画像をアップロードした撮影者ID（または運営者ID）ごとにフォルダ分けされており、手動での整理・確認に役立ちます。
    *   **削除:** 「**削除**」ボタンで、そのグループに属するすべての画像とドキュメントを完全に削除できます。

**【重要】** 複数の旧運営者が同じ`group_id`を使っていた場合、ダウンロードしたZIPにはそれらの画像がすべて含まれます。データの所有権をシステムが自動判断することは困難なため、ダウンロード後の最終的な判断と再アップロードは、システム管理者が責任をもって行ってください。

---

## Part 3: 共通事項

### 3.1 ログアウト

各画面のヘッダーに表示されている「ログアウト」ボタンをクリックすることで、安全にシステムからログアウトできます。作業終了後は、必ずログアウトしてください。

### 3.2 API経由でのアクセス

本アプリケーションのAPIは、プログラムから直接利用することも可能です。その際の認証には「**Bearerトークン認証**」を用います。詳細は技術者向けの `documents/api仕様書.txt` をご参照ください。